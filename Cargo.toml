[workspace]
members = ["crates/*", "tests"]
default-members = ["crates/typst-cli"]
resolver = "2"

[workspace.package]
version = "0.9.0"
rust-version = "1.70" # also change in ci.yml
authors = ["The Typst Project Developers"]
edition = "2021"
homepage = "https://typst.app"
repository = "https://github.com/typst/typst"
readme = "README.md"
license = "Apache-2.0"
categories = ["compilers"]
keywords = ["typst"]

[workspace.dependencies]
typst = { path = "crates/typst" }
typst-cli = { path = "crates/typst-cli" }
typst-docs = { path = "crates/typst-docs" }
typst-ide = { path = "crates/typst-ide" }
typst-library = { path = "crates/typst-library" }
typst-macros = { path = "crates/typst-macros" }
typst-pdf = { path = "crates/typst-pdf" }
typst-render = { path = "crates/typst-render" }
typst-svg = { path = "crates/typst-svg" }
typst-syntax = { path = "crates/typst-syntax" }
az = "1.2"
base64 = "0.21.2"
bitflags = { version = "2", features = ["serde"] }
bytemuck = "1"
chinese-number = { version = "0.7.2", default-features = false, features = ["number-to-chinese"] }
chrono = { version = "0.4.24", default-features = false, features = ["clock", "std"] }
ciborium = "0.2.1"
clap = { version = "4.4", features = ["derive", "env"] }
clap_complete = "4.2.1"
clap_mangen = "0.2.10"
codespan-reporting = "0.11"
comemo = "0.3"
csv = "1"
dirs = "5"
ecow = { version = "0.2", features = ["serde"] }
env_proxy = "0.4"
flate2 = "1"
fontdb = { version = "0.15", default-features = false }
hayagriva = "0.4"
heck = "0.4"
hypher = "0.1.4"
iai = { git = "https://github.com/typst/iai", rev = "3f0f927" }
icu_properties = { version = "1.3", features = ["serde"] }
icu_provider = { version = "1.3", features = ["sync"] }
icu_provider_adapters = "1.3"
icu_provider_blob = "1.3"
icu_segmenter = { version = "1.3", features = ["serde"] }
if_chain = "1"
image = { version = "0.24", default-features = false, features = ["png", "jpeg", "gif"] }
include_dir = "0.7"
indexmap = { version = "2", features = ["serde"] }
inferno = "0.11.15"
kurbo = "0.9"
lasso = { version = "0.7.2", features = ["ahasher", "multi-threaded"] }
lipsum = "0.9"
log = "0.4"
miniz_oxide = "0.7"
notify = "6"
once_cell = "1"
open = "5"
oxipng = { git = "https://github.com/typst/oxipng", rev = "b8ec65b", default-features = false, features = ["filetime", "parallel", "zopfli"] }
palette = { version = "0.7.3", default-features = false, features = ["approx", "libm"] }
pathdiff = "0.2"
pdf-writer = "0.9.2"
pixglyph = "0.2"
proc-macro2 = "1"
pulldown-cmark = "0.9"
quote = "1"
rayon = "1.7.0"
regex = "1"
resvg = { version = "0.36.0", default-features = false, features = ["raster-images"] }
roxmltree = "0.18"
rustls = "0.21"
rustls-pemfile = "1"
rustybuzz = "0.10"
same-file = "1"
self-replace = "1.3.7"
semver = "1"
serde = { version = "1.0.184", features = ["derive"] }
serde_json = "1"
serde_yaml = "0.9"
siphasher = "0.3"
smallvec = { version = "1.11.1", features = ["union", "const_generics", "const_new"] }
stacker = "0.1.15"
subsetter = "0.1.1"
svg2pdf = "0.9"
syn = { version = "2", features = ["full", "extra-traits"] }
syntect = { version = "5", default-features = false, features = ["parsing", "regex-fancy", "plist-load", "yaml-load"] }
tar = "0.4"
tempfile = "3.7.0"
time = { version = "0.3.20", features = ["formatting", "macros", "parsing"] }
tiny-skia = "0.11"
toml = { version = "0.8", default-features = false, features = ["parse"] }
tracing = "0.1.37"
tracing-error = "0.2"
tracing-flame = "0.2.0"
tracing-subscriber = "0.3.17"
ttf-parser = "0.19.2"
typed-arena = "2"
unicode_names2 = "0.6.0"
unicode-bidi = "0.3.13"
unicode-ident = "1.0"
unicode-math-class = "0.1"
unicode-properties = "0.1"
unicode-script = "0.5"
unicode-segmentation = "1"
unscanny = "0.1"
ureq = "2"
usvg = { version = "0.36", default-features = false, features = ["text"] }
walkdir = "2"
wasmi = "0.31.0"
xmlparser = "0.13.5"
xmlwriter = "0.1.0"
xmp-writer = "0.2"
xz2 = "0.1"
yaml-front-matter = "0.1"
zip = "0.6"

[profile.dev.package."*"]
opt-level = 2

[profile.release]
lto = "thin"
codegen-units = 1

[profile.release.package."typst-cli"]
strip = true
